{% extends 'base.html.twig' %}

{% block title %}{{ recipe.name }}{% endblock %}

{% block body %}

<div class="container mt-4">
    <h1>{{ recipe.name }}</h1>
    <div class= "container">
        {% if recipe.filename %}
            {# <img src="/images/recipes/{{ recipe.filename }}" alt="" Mettre du css ou faire du css>  #}
            <img src="{{ vich_uploader_asset(recipe, 'imageFile') }}" alt="" {# Mettre du css ou faire du css #}> 
        {% else %}
            <img src="/images/recipes/{{ recipe.category.name|replace({'entrées': 'entrees'}) }}.jpg" alt="">
        {% endif %}
        <h2>Ingrédients</h2>

        {# <ul> #}
            {# {% for ingredient in ingredientArray %} #}
                {# <li>               #}
                    {# {{ ingredient.quantity }} {{ ingredient.measured }} {{ ingredient[0].name }} #}
                {# </li> #}
            {# {% endfor %} #}
        {# </ul> #}
        <ul>
            {% set i = 0 %}
            {% for ingredient in recipe.recipeIngredients %}
                <li>              
                    {{ ingredient.quantity }} {{ ingredient.measured }} {{ ingredientArray[i].name }} {# {{ ingredientNameArray[i] }}#}
                </li>
                {% set i = i + 1 %}
            {% endfor %}
        </ul>
        
        <h2>Préparation</h2>

        {% for step in recipe.steps %}
            <h6>Etape {{ loop.index }}</h6>
            <p>{{ step.description }}</p>
        {% endfor %}
    </div>

    <div class="container">
        <h2>{{ recipe.comments | length}} commentaire{% if recipe.comments | length > 1 %}s :{% endif %}</h2>

        {% for comment in recipe.comments |reverse %}
            <h6>{{ comment.author }} le {{ comment.createdAT | date ('d/m/Y à H:i') }} :</h6>
            <p>{{ comment.content }}</p>
        {% endfor %}
        
        {# <h6>Julien le 07/06/19 :</h6>
        <p>
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Nemo saepe nisi, dolorum ratione sed recusandae enim ipsa, tenetur quae eligendi dolores amet, cupiditate doloremque facere accusantium? Enim, ex suscipit atque eaque eius asperiores laudantium tenetur quibusdam! Rerum possimus adipisci aut assumenda, voluptates mollitia laborum quam. Voluptatem sed molestiae id odio.
        </p>
        
        <h6>Isaline le 06/06/19 :</h6>
        <p>
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Nemo saepe nisi, dolorum ratione sed recusandae enim ipsa, tenetur quae eligendi dolores amet, cupiditate doloremque facere accusantium? Enim, ex suscipit atque eaque eius asperiores laudantium tenetur quibusdam! Rerum possimus adipisci aut assumenda, voluptates mollitia laborum quam. Voluptatem sed molestiae id odio.
        </p> #}
    </div>

    {# {{ app.user.username }} #}
    {% if app.user%}
        {{ form_start(commentForm) }}
            {{ form_row(commentForm.content, {'label': "Commentaire :", 'attr':{'placeholder': "Votre commentaire"}}) }}
            <button type="submit" class="btn btn-success">Envoyer</button>
        {{ form_end(commentForm)}}
    {% else %}
        <h5>Vous ne pouvez pas commenter si vous n'êtes pas connecté !</h5>
        <a href="{{ path('login')}}" class="btn btn-primary">Connexion</a>
    {% endif %}
</div>
{% endblock %}
